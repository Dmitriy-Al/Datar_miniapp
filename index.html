<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://telegram.org/js/telegram-web-app.js?59"></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <h1>Заголовок</h1>
  <body>
    <div class="output-container">
      <output class="output" id="text"> </output>
    </div>

    <div>
      <button class="but" id="test" onclick="action()">Test</button>
    </div>

    <div>
      <button class="but" id="setItem">set Item(</button>
    </div>

    <div>
      <button class="but" id="getItem">get Item</button>
    </div>

    <div>
      <button class="but" id="delItem">del Items</button>
    </div>
  </body>
</html>

<script>
  let tg = window.Telegram.WebApp;
  const cloudStorage = tg.CloudStorage;

  const button = document.getElementById("test");
  const output = document.getElementById("text");

  const set = document.getElementById("setItem");
  const get = document.getElementById("getItem");
  const del = document.getElementById("delItem");

  const key = "key";

  set.addEventListener("click", () => {
    output.innerHTML = "";
    cloudStorage.setItem(key, " Тестовый текст ");
    output.append(" <1> ");

    tg.WebApp.sendData(" Тестовые данные "({ storageData: "value" }));

    output.append(" <2> ");
  });

  get.addEventListener("click", () => {
    output.innerHTML = "";
    cloudStorage.getItem(key, (error, data) => {
      const i = !error && data ? data : error;
      output.append(i);
    });
  });

  del.addEventListener("click", () => {
    output.innerHTML = "";
    cloudStorage.removeItem(key, (error, result) => {
      const x = !error && result ? result : error;
      output.append(i);
      output.append(" <Deleted> ");
    });
  });

  function action() {
    output.innerHTML = "";
    let data1 = tg.initDataUnsafe.user.first_name;
    output.append(" " + data1 + " ");

    tg.WebApp.sendData("Test data from web app");
  }

  /*

  button.addEventListener("click", function () {
    alert(`ALERT`);
  });
 

   */
</script>

<style>
  .output-container {
    width: 500px;
    height: 200px;
    background-color: rgb(86, 152, 228);
    padding: 20px;
  }
  .output {
    width: 450px;
    height: 190px;
    background-color: rgb(178, 247, 230);
    margin: 10px;
    padding: 20px;
  }
  .but {
    background-color: rgb(8, 255, 193);
    padding: 20px;
  }
  .but:hover {
    background-color: rgb(4, 202, 153);
  }
</style>
